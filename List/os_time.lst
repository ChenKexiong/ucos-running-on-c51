C51 COMPILER V9.51   OS_TIME                                                               02/25/2015 10:39:22 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE OS_TIME
OBJECT MODULE PLACED IN .\Output\os_time.obj
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE Source\os_time.c BROWSE INCDIR(.\Source) DEBUG OBJECTEXTEND PRINT(.\List\os
                    -_time.lst) TABS(2) OBJECT(.\Output\os_time.obj)

line level    source

   1          /*
   2          *********************************************************************************************************
   3          *                                                uC/OS-II
   4          *                                          The Real-Time Kernel
   5          *                                             TIME MANAGEMENT
   6          *
   7          *                              (c) Copyright 1992-2009, Micrium, Weston, FL
   8          *                                           All Rights Reserved
   9          *
  10          * File    : OS_TIME.C
  11          * By      : Jean J. Labrosse
  12          * Version : V2.91
  13          *
  14          * LICENSING TERMS:
  15          * ---------------
  16          *   uC/OS-II is provided in source form for FREE evaluation, for educational use or for peaceful research.
  17          * If you plan on using  uC/OS-II  in a commercial product you need to contact Micriµm to properly license
  18          * its use in your product. We provide ALL the source code for your convenience and to help you experience
  19          * uC/OS-II.   The fact that the  source is provided does  NOT  mean that you can use it without  paying a
  20          * licensing fee.
  21          *********************************************************************************************************
  22          */
  23          
  24          #ifndef  OS_MASTER_FILE
  25          #include <ucos_ii.h>
*** WARNING C318 IN LINE 44 OF .\Source\ucos_ii.h: can't open file 'app_cfg.h'
*** WARNING C318 IN LINE 45 OF .\Source\ucos_ii.h: can't open file 'os_cfg.h'
*** WARNING C322 IN LINE 72 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 81 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 170 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 345 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 351 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 351 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 351 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 351 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 351 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 351 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 372 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 372 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 419 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 433 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 433 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 463 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 479 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 506 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 520 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 537 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 548 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 548 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 548 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 548 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 548 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 552 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 552 OF .\Source\ucos_ii.h: unknown identifier
C51 COMPILER V9.51   OS_TIME                                                               02/25/2015 10:39:22 PAGE 2   

*** WARNING C322 IN LINE 552 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 552 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 552 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 552 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 556 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 556 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 556 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 560 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 560 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 577 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 581 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 589 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 593 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 605 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 646 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 646 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 646 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 646 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 646 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 646 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 651 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 651 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 656 OF .\Source\ucos_ii.h: unknown identifier
*** ERROR C202 IN LINE 672 OF .\Source\ucos_ii.h: 'OS_LOWEST_PRIO': undefined identifier
*** ERROR C136 IN LINE 672 OF .\Source\ucos_ii.h: invalid dimension size: [0]
*** ERROR C202 IN LINE 684 OF .\Source\ucos_ii.h: 'OS_TASK_IDLE_STK_SIZE': undefined identifier
*** ERROR C136 IN LINE 684 OF .\Source\ucos_ii.h: invalid dimension size: [0]
*** ERROR C202 IN LINE 691 OF .\Source\ucos_ii.h: 'OS_LOWEST_PRIO': undefined identifier
*** ERROR C136 IN LINE 691 OF .\Source\ucos_ii.h: invalid dimension size: [0]
*** ERROR C202 IN LINE 692 OF .\Source\ucos_ii.h: 'OS_MAX_TASKS': undefined identifier
*** ERROR C136 IN LINE 692 OF .\Source\ucos_ii.h: invalid dimension size: [0]
*** WARNING C322 IN LINE 694 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 698 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 698 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 703 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 703 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 708 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 712 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 743 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 743 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 743 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 743 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 743 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 771 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 771 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 823 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 870 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 870 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 904 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 940 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 940 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 999 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1044 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1049 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1056 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1068 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1073 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1083 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1088 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1088 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1093 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1100 OF .\Source\ucos_ii.h: unknown identifier
C51 COMPILER V9.51   OS_TIME                                                               02/25/2015 10:39:22 PAGE 3   

*** WARNING C322 IN LINE 1120 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1127 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1131 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1144 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1193 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1212 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1216 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1216 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1216 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1216 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1216 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1237 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1237 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1249 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1249 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1253 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1259 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1259 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1259 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1259 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1267 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1271 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1271 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1277 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1277 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1289 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1301 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1321 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1327 OF .\Source\ucos_ii.h: unknown identifier
*** WARNING C322 IN LINE 1339 OF .\Source\ucos_ii.h: unknown identifier
*** ERROR C320 IN LINE 1393 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_FLAG_EN: Enable (1) or Disable (0) code generat
             -ion for Event Flags"
*** ERROR C320 IN LINE 1435 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_MBOX_EN: Enable (1) or Disable (0) code generat
             -ion for MAILBOXES"
*** ERROR C320 IN LINE 1469 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_MEM_EN: Enable (1) or Disable (0) code generati
             -on for MEMORY MANAGER"
*** ERROR C320 IN LINE 1495 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_MUTEX_EN: Enable (1) or Disable (0) code genera
             -tion for MUTEX"
*** ERROR C320 IN LINE 1517 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_Q_EN: Enable (1) or Disable (0) code generation
             - for QUEUES"
*** ERROR C320 IN LINE 1567 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_SEM_EN: Enable (1) or Disable (0) code generati
             -on for SEMAPHORES"
*** ERROR C320 IN LINE 1597 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_MAX_TASKS: Max. number of tasks in your applica
             -tion"
*** WARNING C322 IN LINE 1609 OF .\Source\ucos_ii.h: unknown identifier
*** ERROR C320 IN LINE 1614 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_IDLE_STK_SIZE: Idle task stack size"
*** ERROR C320 IN LINE 1618 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_STAT_EN: Enable (1) or Disable(0) the stat
             -istics task"
*** ERROR C320 IN LINE 1622 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_STAT_STK_SIZE: Statistics task stack size"
*** ERROR C320 IN LINE 1626 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_STAT_STK_CHK_EN: Check task stacks from st
             -atistics task"
*** ERROR C320 IN LINE 1630 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_CHANGE_PRIO_EN: Include code for OSTaskCha
             -ngePrio()"
*** ERROR C320 IN LINE 1634 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_CREATE_EN: Include code for OSTaskCreate()
             -"
*** ERROR C320 IN LINE 1638 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_CREATE_EXT_EN: Include code for OSTaskCrea
             -teExt()"
*** ERROR C320 IN LINE 1642 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_DEL_EN: Include code for OSTaskDel()"
*** ERROR C320 IN LINE 1646 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_NAME_EN: Enable task names"
*** ERROR C320 IN LINE 1650 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_SUSPEND_EN: Include code for OSTaskSuspend
             -() and OSTaskResume()"
*** ERROR C320 IN LINE 1654 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_QUERY_EN: Include code for OSTaskQuery()"
C51 COMPILER V9.51   OS_TIME                                                               02/25/2015 10:39:22 PAGE 4   

*** ERROR C320 IN LINE 1658 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_REG_TBL_SIZE: Include code for task specif
             -ic registers"
*** ERROR C320 IN LINE 1672 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TICKS_PER_SEC: Sets the number of ticks in one 
             -second"
*** ERROR C320 IN LINE 1676 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TIME_DLY_HMSM_EN: Include code for OSTimeDlyHMS
             -M()"
*** ERROR C320 IN LINE 1680 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TIME_DLY_RESUME_EN: Include code for OSTimeDlyR
             -esume()"
*** ERROR C320 IN LINE 1684 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TIME_GET_SET_EN: Include code for OSTimeGet() a
             -nd OSTimeSet()"
*** ERROR C320 IN LINE 1694 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TMR_EN: When (1) enables code generation for Ti
             -mer Management"
*** ERROR C320 IN LINE 1746 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_ARG_CHK_EN: Enable (1) or Disable (0) argument 
             -checking"
*** ERROR C320 IN LINE 1751 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_CPU_HOOKS_EN: uC/OS-II hooks are found in the p
             -rocessor port files when 1"
*** ERROR C320 IN LINE 1756 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_APP_HOOKS_EN: Application-defined hooks are cal
             -led from the uC/OS-II hooks"
*** ERROR C320 IN LINE 1761 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_DEBUG_EN: Allows you to include variables for d
             -ebugging or not"
*** ERROR C320 IN LINE 1766 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_LOWEST_PRIO: Defines the lowest priority that c
             -an be assigned"
*** ERROR C320 IN LINE 1771 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_MAX_EVENTS: Max. number of event control blocks
             - in your application"
*** ERROR C320 IN LINE 1780 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_SCHED_LOCK_EN: Include code for OSSchedLock() a
             -nd OSSchedUnlock()"
*** ERROR C320 IN LINE 1785 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_EVENT_MULTI_EN: Include code for OSEventPendMul
             -ti()"
*** ERROR C320 IN LINE 1790 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_PROFILE_EN: Include data structure for run
             --time task profiling"
*** ERROR C320 IN LINE 1795 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TASK_SW_HOOK_EN: Allows you to include the code
             - for OSTaskSwHook() or not"
*** ERROR C320 IN LINE 1800 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TICK_STEP_EN: Allows to 'step' one tick at a ti
             -me with uC/OS-View"
*** ERROR C320 IN LINE 1805 OF .\Source\ucos_ii.h: "OS_CFG.H, Missing OS_TIME_TICK_HOOK_EN: Allows you to include the co
             -de for OSTimeTickHook() or not"
  26          #endif
  27          
  28          /*
  29          *********************************************************************************************************
  30          *                                       DELAY TASK 'n' TICKS
  31          *
  32          * Description: This function is called to delay execution of the currently running task until the
  33          *              specified number of system ticks expires.  This, of course, directly equates to delaying
  34          *              the current task for some time to expire.  No delay will result If the specified delay is
  35          *              0.  If the specified delay is greater than 0 then, a context switch will result.
  36          *
  37          * Arguments  : ticks     is the time delay that the task will be suspended in number of clock 'ticks'.
  38          *                        Note that by specifying 0, the task will not be delayed.
  39          *
  40          * Returns    : none
  41          *********************************************************************************************************
  42          */
  43          
  44          void  OSTimeDly (INT32U ticks)
  45          {
  46   1          INT8U      y;
  47   1      #if OS_CRITICAL_METHOD == 3u                     /* Allocate storage for CPU status register           */
*** WARNING C322 IN LINE 47 OF Source\os_time.c: unknown identifier
                  OS_CPU_SR  cpu_sr = 0u;
              #endif
  50   1      
C51 COMPILER V9.51   OS_TIME                                                               02/25/2015 10:39:22 PAGE 5   

  51   1      
  52   1      
  53   1          if (OSIntNesting > 0u) {                     /* See if trying to call from an ISR                  */
  54   2              return;
  55   2          }
  56   1          if (OSLockNesting > 0u) {                    /* See if called with scheduler locked                */
  57   2              return;
  58   2          }
  59   1          if (ticks > 0u) {                            /* 0 means no delay!                                  */
  60   2              OS_ENTER_CRITICAL();
  61   2              y            =  OSTCBCur->OSTCBY;        /* Delay current task                                 */
  62   2              OSRdyTbl[y] &= (OS_PRIO)~OSTCBCur->OSTCBBitX;
  63   2              if (OSRdyTbl[y] == 0u) {
  64   3                  OSRdyGrp &= (OS_PRIO)~OSTCBCur->OSTCBBitY;
  65   3              }
  66   2              OSTCBCur->OSTCBDly = ticks;              /* Load ticks in TCB                                  */
  67   2              OS_EXIT_CRITICAL();
  68   2              OS_Sched();                              /* Find next task to run!                             */
  69   2          }
  70   1      }
  71          /*$PAGE*/
  72          /*
  73          *********************************************************************************************************
  74          *                                     DELAY TASK FOR SPECIFIED TIME
  75          *
  76          * Description: This function is called to delay execution of the currently running task until some time
  77          *              expires.  This call allows you to specify the delay time in HOURS, MINUTES, SECONDS and
  78          *              MILLISECONDS instead of ticks.
  79          *
  80          * Arguments  : hours     specifies the number of hours that the task will be delayed (max. is 255)
  81          *              minutes   specifies the number of minutes (max. 59)
  82          *              seconds   specifies the number of seconds (max. 59)
  83          *              ms        specifies the number of milliseconds (max. 999)
  84          *
  85          * Returns    : OS_ERR_NONE
  86          *              OS_ERR_TIME_INVALID_MINUTES
  87          *              OS_ERR_TIME_INVALID_SECONDS
  88          *              OS_ERR_TIME_INVALID_MS
  89          *              OS_ERR_TIME_ZERO_DLY
  90          *              OS_ERR_TIME_DLY_ISR
  91          *
  92          * Note(s)    : The resolution on the milliseconds depends on the tick rate.  For example, you can't do
  93          *              a 10 mS delay if the ticker interrupts every 100 mS.  In this case, the delay would be
  94          *              set to 0.  The actual delay is rounded to the nearest tick.
  95          *********************************************************************************************************
  96          */
  97          
  98          #if OS_TIME_DLY_HMSM_EN > 0u
*** WARNING C322 IN LINE 98 OF Source\os_time.c: unknown identifier
              INT8U  OSTimeDlyHMSM (INT8U   hours,
                                    INT8U   minutes,
                                    INT8U   seconds,
                                    INT16U  ms)
              {
                  INT32U ticks;
              
              
                  if (OSIntNesting > 0u) {                     /* See if trying to call from an ISR                  */
                      return (OS_ERR_TIME_DLY_ISR);
                  }
                  if (OSLockNesting > 0u) {                    /* See if called with scheduler locked                */
                      return (OS_ERR_SCHED_LOCKED);
C51 COMPILER V9.51   OS_TIME                                                               02/25/2015 10:39:22 PAGE 6   

                  }
              #if OS_ARG_CHK_EN > 0u
                  if (hours == 0u) {
                      if (minutes == 0u) {
                          if (seconds == 0u) {
                              if (ms == 0u) {
                                  return (OS_ERR_TIME_ZERO_DLY);
                              }
                          }
                      }
                  }
                  if (minutes > 59u) {
                      return (OS_ERR_TIME_INVALID_MINUTES);    /* Validate arguments to be within range              */
                  }
                  if (seconds > 59u) {
                      return (OS_ERR_TIME_INVALID_SECONDS);
                  }
                  if (ms > 999u) {
                      return (OS_ERR_TIME_INVALID_MS);
                  }
              #endif
                                                               /* Compute the total number of clock ticks required.. */
                                                               /* .. (rounded to the nearest tick)                   */
                  ticks = ((INT32U)hours * 3600uL + (INT32U)minutes * 60uL + (INT32U)seconds) * OS_TICKS_PER_SEC
                        + OS_TICKS_PER_SEC * ((INT32U)ms + 500uL / OS_TICKS_PER_SEC) / 1000uL;
                  OSTimeDly(ticks);
                  return (OS_ERR_NONE);
              }
              #endif
 141          /*$PAGE*/
 142          /*
 143          *********************************************************************************************************
 144          *                                         RESUME A DELAYED TASK
 145          *
 146          * Description: This function is used resume a task that has been delayed through a call to either
 147          *              OSTimeDly() or OSTimeDlyHMSM().  Note that you can call this function to resume a
 148          *              task that is waiting for an event with timeout.  This would make the task look
 149          *              like a timeout occurred.
 150          *
 151          * Arguments  : prio                      specifies the priority of the task to resume
 152          *
 153          * Returns    : OS_ERR_NONE               Task has been resumed
 154          *              OS_ERR_PRIO_INVALID       if the priority you specify is higher that the maximum allowed
 155          *                                        (i.e. >= OS_LOWEST_PRIO)
 156          *              OS_ERR_TIME_NOT_DLY       Task is not waiting for time to expire
 157          *              OS_ERR_TASK_NOT_EXIST     The desired task has not been created or has been assigned to a M
             -utex.
 158          *********************************************************************************************************
 159          */
 160          
 161          #if OS_TIME_DLY_RESUME_EN > 0u
*** WARNING C322 IN LINE 161 OF Source\os_time.c: unknown identifier
              INT8U  OSTimeDlyResume (INT8U prio)
              {
                  OS_TCB    *ptcb;
              #if OS_CRITICAL_METHOD == 3u                                   /* Storage for CPU status register      */
                  OS_CPU_SR  cpu_sr = 0u;
              #endif
              
              
              
                  if (prio >= OS_LOWEST_PRIO) {
C51 COMPILER V9.51   OS_TIME                                                               02/25/2015 10:39:22 PAGE 7   

                      return (OS_ERR_PRIO_INVALID);
                  }
                  OS_ENTER_CRITICAL();
                  ptcb = OSTCBPrioTbl[prio];                                 /* Make sure that task exist            */
                  if (ptcb == (OS_TCB *)0) {
                      OS_EXIT_CRITICAL();
                      return (OS_ERR_TASK_NOT_EXIST);                        /* The task does not exist              */
                  }
                  if (ptcb == OS_TCB_RESERVED) {
                      OS_EXIT_CRITICAL();
                      return (OS_ERR_TASK_NOT_EXIST);                        /* The task does not exist              */
                  }
                  if (ptcb->OSTCBDly == 0u) {                                /* See if task is delayed               */
                      OS_EXIT_CRITICAL();
                      return (OS_ERR_TIME_NOT_DLY);                          /* Indicate that task was not delayed   */
                  }
              
                  ptcb->OSTCBDly = 0u;                                       /* Clear the time delay                 */
                  if ((ptcb->OSTCBStat & OS_STAT_PEND_ANY) != OS_STAT_RDY) {
                      ptcb->OSTCBStat     &= ~OS_STAT_PEND_ANY;              /* Yes, Clear status flag               */
                      ptcb->OSTCBStatPend  =  OS_STAT_PEND_TO;               /* Indicate PEND timeout                */
                  } else {
                      ptcb->OSTCBStatPend  =  OS_STAT_PEND_OK;
                  }
                  if ((ptcb->OSTCBStat & OS_STAT_SUSPEND) == OS_STAT_RDY) {  /* Is task suspended?                   */
                      OSRdyGrp               |= ptcb->OSTCBBitY;             /* No,  Make ready                      */
                      OSRdyTbl[ptcb->OSTCBY] |= ptcb->OSTCBBitX;
                      OS_EXIT_CRITICAL();
                      OS_Sched();                                            /* See if this is new highest priority  */
                  } else {
                      OS_EXIT_CRITICAL();                                    /* Task may be suspended                */
                  }
                  return (OS_ERR_NONE);
              }
              #endif
 207          /*$PAGE*/
 208          /*
 209          *********************************************************************************************************
 210          *                                         GET CURRENT SYSTEM TIME
 211          *
 212          * Description: This function is used by your application to obtain the current value of the 32-bit
 213          *              counter which keeps track of the number of clock ticks.
 214          *
 215          * Arguments  : none
 216          *
 217          * Returns    : The current value of OSTime
 218          *********************************************************************************************************
 219          */
 220          
 221          #if OS_TIME_GET_SET_EN > 0u
*** WARNING C322 IN LINE 221 OF Source\os_time.c: unknown identifier
              INT32U  OSTimeGet (void)
              {
                  INT32U     ticks;
              #if OS_CRITICAL_METHOD == 3u                     /* Allocate storage for CPU status register           */
                  OS_CPU_SR  cpu_sr = 0u;
              #endif
              
              
              
                  OS_ENTER_CRITICAL();
                  ticks = OSTime;
C51 COMPILER V9.51   OS_TIME                                                               02/25/2015 10:39:22 PAGE 8   

                  OS_EXIT_CRITICAL();
                  return (ticks);
              }
              #endif
 237          
 238          /*
 239          *********************************************************************************************************
 240          *                                            SET SYSTEM CLOCK
 241          *
 242          * Description: This function sets the 32-bit counter which keeps track of the number of clock ticks.
 243          *
 244          * Arguments  : ticks      specifies the new value that OSTime needs to take.
 245          *
 246          * Returns    : none
 247          *********************************************************************************************************
 248          */
 249          
 250          #if OS_TIME_GET_SET_EN > 0u
*** WARNING C322 IN LINE 250 OF Source\os_time.c: unknown identifier
              void  OSTimeSet (INT32U ticks)
              {
              #if OS_CRITICAL_METHOD == 3u                     /* Allocate storage for CPU status register           */
                  OS_CPU_SR  cpu_sr = 0u;
              #endif
              
              
              
                  OS_ENTER_CRITICAL();
                  OSTime = ticks;
                  OS_EXIT_CRITICAL();
              }
              #endif
 264                                                                                                                                                       
             -                                                                                

C51 COMPILATION COMPLETE.  119 WARNING(S),  44 ERROR(S)
